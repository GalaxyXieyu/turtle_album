PR,Title,Scope (Backend),Files/Modules,Acceptance Criteria,Test Steps (Detailed)
1,DB schema: series + breeder extensions + mating/egg tables,"Add Series table; extend Product for breeder fields (series_id, sex, offspring_unit_price, lineage fields); add MatingRecord and EggRecord tables; update SQLAlchemy relationships; keep ProductImage for gallery.",backend/app/models/models.py; backend/app/schemas/schemas.py,"DB can create tables; Product.code remains unique; series and new tables exist; constraints enforced in code (sex/series checks planned for PR3/PR4).","1) Create a clean DB: delete backend/glam_cart.db (or set DATABASE_URL to a temp sqlite).
2) Start API: `cd backend && uvicorn app.main:app --reload`.
3) Hit health endpoint if exists.
4) In python shell (optional): import models and call create_tables(); verify tables exist with sqlite client.
5) Run unit smoke: `python3 -m compileall app`"
2,Admin CRUD: Series,"Admin endpoints to create/list/update/delete series; validate unique name; expose ordering fields; protect with admin auth.",backend/app/api/routers/admin.py (or new routers/series_admin.py); backend/app/schemas/schemas.py; backend/app/services/*,"Admin can manage series; inactive series not returned by public list endpoint (PR3).","1) Start backend.
2) Login admin: POST /api/auth/login with admin creds -> token.
3) Create series: POST /api/admin/series {name, sort_order, is_active}.
4) List series: GET /api/admin/series.
5) Update: PUT /api/admin/series/{id}.
6) Delete: DELETE /api/admin/series/{id}.
7) Negative: duplicate name -> 400."
3,Public APIs: series + breeder feed + breeder detail,"Public endpoints: series list; breeders feed by series+sex; breeder detail by code (includes images; female includes mating+egg+price; male excludes egg/price); optional lineage shown when provided.",backend/app/api/routers/products.py (adapt to breeders); backend/app/schemas/schemas.py,"Public endpoints match business behavior; female/male rules reflected in payload; pagination works (if existing).","1) Seed data via admin endpoints (PR4) or direct DB insert.
2) GET /api/series -> only active, ordered.
3) GET /api/breeders?series_id=...&sex=female -> returns cover + code + price.
4) GET /api/breeders?series_id=...&sex=male -> returns cover + code (no price).
5) GET /api/breeders/{code}:
   - female: contains price + mating_records + egg_records + lineage if provided.
   - male: does NOT contain egg_records or price.
6) 404 for unknown code."
4,Admin CRUD: breeders + media + mating + eggs,"Admin endpoints to manage breeders (male/female); upload/assign cover+gallery images; CRUD mating records (female only, within same series, male required); CRUD egg records (female only); set offspring_unit_price for female; set lineage optional fields.",backend/app/api/routers/admin.py (or split routers); backend/app/api/routers/products.py; backend/app/api/utils.py; backend/app/schemas/schemas.py,"Admin can fully operate required CRUD without violating rules; invalid operations return 400 with clear message.","1) Login admin.
2) Create male breeder: POST /api/admin/breeders (sex=male, series_id, code, name/desc).
3) Create female breeder: POST /api/admin/breeders (sex=female, series_id, code, offspring_unit_price).
4) Upload image: existing upload endpoint -> url.
5) Set cover (ProductImage type=main) + gallery images (type=gallery) with sort_order.
6) Add mating record on female: POST /api/admin/breeders/{female_id}/matings {male_id, mated_at}.
   - Try cross-series male -> 400.
   - Try using female as male -> 400.
7) Add egg record on female: POST /api/admin/breeders/{female_id}/eggs {laid_at, count}.
   - Try on male -> 400.
8) Set lineage fields on breeder (sire_code/dam_code + sire/dam images); verify public detail shows lineage card only when present."
5,Backend test suite + docs,"Add API tests for core rules and endpoints; add docs on running tests and sample curl; ensure regressions covered.",backend/tests/*; docs/turtle-album/*,"Tests cover: series CRUD; breeder CRUD; female/male invariants; cross-series mating blocked; egg-on-male blocked; public payload shape.","1) Ensure test DB is isolated (sqlite tmp).
2) Run: `pytest -q`.
3) Review report output.
4) Manual smoke: run backend, call public endpoints from PR3."
